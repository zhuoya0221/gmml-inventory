(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[96],{2890:(e,t,s)=>{"use strict";s.d(t,{N:()=>n});let n=(0,s(945).UU)("https://ydamkailcnhfmutdvmsk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlkYW1rYWlsY25oZm11dGR2bXNrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4NTExMzIsImV4cCI6MjA3NDQyNzEzMn0.8oSPmI_svRRq9GdvsssciUNe0PmD_fkkyhwDG5-FGdA",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})},7993:(e,t,s)=>{Promise.resolve().then(s.bind(s,8249))},8249:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var n=s(5155),c=s(2115),a=s(2890);function i(){let[e,t]=(0,c.useState)([]),s=e=>{t(t=>[...t,"".concat(new Date().toISOString(),": ").concat(e)])},i=async()=>{t([]),s("\uD83D\uDD0D Starting database connection test..."),s("\uD83D\uDD17 Supabase URL: ".concat("https://ydamkailcnhfmutdvmsk.supabase.co")),s("\uD83D\uDD11 Supabase Key: ".concat("Present"));try{s("\uD83E\uDDEA Testing basic connection...");let{data:e,error:t}=await a.N.from("inventory_items").select("count").limit(1);t?(s("❌ Connection failed: ".concat(t.message)),s("\uD83D\uDCCB Error details: ".concat(t.details||"None")),s("\uD83D\uDCA1 Error hint: ".concat(t.hint||"None")),s("\uD83D\uDD22 Error code: ".concat(t.code||"None"))):(s("✅ Connection successful!"),s("\uD83D\uDCCA Result: ".concat(JSON.stringify(e))))}catch(e){s("\uD83D\uDCA5 Exception during connection test: ".concat(e.message))}try{s("\uD83D\uDCCB Testing table access...");let{data:e,error:t}=await a.N.from("inventory_items").select("*").limit(3);t?s("❌ Table access failed: ".concat(t.message)):(s("✅ Table access successful! Found ".concat((null==e?void 0:e.length)||0," items")),e&&e.length>0&&s("\uD83D\uDCE6 Sample item: ".concat(JSON.stringify(e[0],null,2))))}catch(e){s("\uD83D\uDCA5 Exception during table test: ".concat(e.message))}try{s("➕ Testing insert capability...");let e={name:"Test Item "+Date.now(),category:"Test",current_stock:1,min_stock:1,status:"In Stock",storage_location:"Test Location",created_by:"test-user",updated_by:"test-user"},{data:t,error:n}=await a.N.from("inventory_items").insert([e]).select().single();n?(s("❌ Insert failed: ".concat(n.message)),s("\uD83D\uDCCB Insert error details: ".concat(n.details||"None"))):(s("✅ Insert successful!"),s("\uD83D\uDCE6 Inserted item: ".concat(JSON.stringify(t))),await a.N.from("inventory_items").delete().eq("id",t.id),s("\uD83E\uDDF9 Cleaned up test item"))}catch(e){s("\uD83D\uDCA5 Exception during insert test: ".concat(e.message))}},o=async()=>{s("\uD83D\uDD12 Testing Row Level Security policies...");try{let{data:e,error:t}=await a.N.from("inventory_items").select("*").limit(1);t?t.message.includes("policy")?(s("\uD83D\uDD12 RLS is active and blocking access: ".concat(t.message)),s("\uD83D\uDCA1 You may need to adjust RLS policies for team access")):s("❌ Other error: ".concat(t.message)):s("✅ RLS allows access (good for team use)")}catch(e){s("\uD83D\uDCA5 Exception during RLS test: ".concat(e.message))}},l=async()=>{s("\uD83D\uDD27 Attempting to fix RLS policies...");try{s("\uD83D\uDCA1 To fix RLS issues, run this SQL in Supabase:"),s('DROP POLICY IF EXISTS "Allow all operations on inventory_items" ON public.inventory_items;'),s('CREATE POLICY "Allow all operations on inventory_items" ON public.inventory_items FOR ALL USING (true) WITH CHECK (true);'),s("\uD83D\uDEA8 Note: This allows unrestricted access - adjust for production!")}catch(e){s("\uD83D\uDCA5 Exception: ".concat(e.message))}};return(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,n.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Database Connection Test"}),(0,n.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,n.jsx)("button",{onClick:i,className:"bg-blue-600 text-white px-6 py-3 rounded hover:bg-blue-700",children:"Run Full Database Test"}),(0,n.jsx)("button",{onClick:o,className:"bg-orange-600 text-white px-6 py-3 rounded hover:bg-orange-700 ml-4",children:"Test RLS Policies"}),(0,n.jsx)("button",{onClick:l,className:"bg-green-600 text-white px-6 py-3 rounded hover:bg-green-700 ml-4",children:"Show RLS Fix"})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,n.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Test Results:"}),(0,n.jsx)("div",{className:"bg-black text-green-400 p-4 rounded font-mono text-sm max-h-96 overflow-auto",children:0===e.length?(0,n.jsx)("div",{className:"text-gray-400",children:'Click "Run Full Database Test" to start testing...'}):e.map((e,t)=>(0,n.jsx)("div",{className:"mb-1",children:e},t))})]}),(0,n.jsxs)("div",{className:"mt-8 bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[(0,n.jsx)("h3",{className:"text-lg font-medium text-yellow-800 mb-4",children:"Common Issues & Solutions:"}),(0,n.jsxs)("div",{className:"text-sm text-yellow-700 space-y-2",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"❌ Connection failed:"})," Check NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY in .env.local"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"❌ Table doesn't exist:"})," Run the SQL scripts in Supabase SQL Editor"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"❌ RLS blocking access:"})," Update Row Level Security policies to allow team access"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"❌ Insert failed:"})," Check table constraints and required fields"]})]})]})]})})}}},e=>{e.O(0,[945,441,255,358],()=>e(e.s=7993)),_N_E=e.O()}]);