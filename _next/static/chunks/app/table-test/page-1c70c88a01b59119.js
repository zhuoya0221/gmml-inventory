(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[284],{2043:(e,t,s)=>{Promise.resolve().then(s.bind(s,8987))},2890:(e,t,s)=>{"use strict";s.d(t,{N:()=>n});let n=(0,s(945).UU)("https://ydamkailcnhfmutdvmsk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlkYW1rYWlsY25oZm11dGR2bXNrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4NTExMzIsImV4cCI6MjA3NDQyNzEzMn0.8oSPmI_svRRq9GdvsssciUNe0PmD_fkkyhwDG5-FGdA",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})},8987:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var n=s(5155),a=s(2115),i=s(2890);function c(){let[e,t]=(0,a.useState)([]),s=e=>{t(t=>[...t,"".concat(new Date().toISOString(),": ").concat(e)])},c=async()=>{t([]),s("\uD83D\uDD0D Testing table structure...");try{s("\uD83D\uDCCB Getting table information...");let{data:e,error:t}=await i.N.from("inventory_items").select("*").limit(1);if(t)return void s("❌ Table access error: ".concat(t.message));if(e&&e.length>0){s("✅ Table structure:");let t=e[0];Object.keys(t).forEach(e=>{s("  - ".concat(e,": ").concat(typeof t[e]," (").concat(t[e],")"))})}else s("⚠️ Table is empty, testing with insert...");s("\uD83E\uDDEA Testing minimal insert...");let n={name:"Test Item "+Date.now(),category:"Test",current_stock:1,min_stock:1,status:"In Stock",storage_location:"Test Location",created_by:"test-user",updated_by:"test-user"};s("\uD83D\uDCE6 Test item: ".concat(JSON.stringify(n,null,2)));let{data:a,error:c}=await i.N.from("inventory_items").insert([n]).select().single();c?(s("❌ Insert failed: ".concat(c.message)),s("\uD83D\uDCCB Error details: ".concat(c.details||"None")),s("\uD83D\uDCA1 Error hint: ".concat(c.hint||"None")),s("\uD83D\uDD22 Error code: ".concat(c.code||"None")),c.message.includes("null value")&&(s("\uD83D\uDD0D Issue: NULL value constraint violation"),s("\uD83D\uDCA1 Check: created_by and updated_by fields might be required")),c.message.includes("violates check constraint")&&(s("\uD83D\uDD0D Issue: Check constraint violation"),s("\uD83D\uDCA1 Check: status field must be one of: In Stock, Low Stock, Out of Stock")),c.message.includes("violates not-null constraint")&&(s("\uD83D\uDD0D Issue: NOT NULL constraint violation"),s("\uD83D\uDCA1 Check: All required fields must have values"))):(s("✅ Insert successful!"),s("\uD83D\uDCE6 Inserted item: ".concat(JSON.stringify(a))),await i.N.from("inventory_items").delete().eq("id",a.id),s("\uD83E\uDDF9 Cleaned up test item"))}catch(e){s("\uD83D\uDCA5 Exception: ".concat(e.message))}},l=async()=>{s("\uD83E\uDDEA Testing with all possible fields...");let e={name:"Full Test Item "+Date.now(),photo_url:null,category:"Test",current_stock:5,min_stock:2,status:"In Stock",storage_location:"Test Location",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),created_by:"test-user",updated_by:"test-user"};s("\uD83D\uDCE6 Full item: ".concat(JSON.stringify(e,null,2)));let{data:t,error:n}=await i.N.from("inventory_items").insert([e]).select().single();n?(s("❌ Full insert failed: ".concat(n.message)),s("\uD83D\uDCCB Details: ".concat(n.details||"None"))):(s("✅ Full insert successful!"),s("\uD83D\uDCE6 Result: ".concat(JSON.stringify(t))),await i.N.from("inventory_items").delete().eq("id",t.id),s("\uD83E\uDDF9 Cleaned up full test item"))};return(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,n.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Table Structure Test"}),(0,n.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,n.jsx)("button",{onClick:c,className:"bg-blue-600 text-white px-6 py-3 rounded hover:bg-blue-700",children:"Test Table Structure"}),(0,n.jsx)("button",{onClick:l,className:"bg-green-600 text-white px-6 py-3 rounded hover:bg-green-700 ml-4",children:"Test Full Insert"})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,n.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Test Results:"}),(0,n.jsx)("div",{className:"bg-black text-green-400 p-4 rounded font-mono text-sm max-h-96 overflow-auto",children:0===e.length?(0,n.jsx)("div",{className:"text-gray-400",children:'Click "Test Table Structure" to start...'}):e.map((e,t)=>(0,n.jsx)("div",{className:"mb-1",children:e},t))})]})]})})}}},e=>{e.O(0,[945,441,255,358],()=>e(e.s=2043)),_N_E=e.O()}]);