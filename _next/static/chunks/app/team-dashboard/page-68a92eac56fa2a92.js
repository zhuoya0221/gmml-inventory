(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[355],{2890:(e,t,r)=>{"use strict";r.d(t,{N:()=>s});let s=(0,r(945).UU)("https://ydamkailcnhfmutdvmsk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlkYW1rYWlsY25oZm11dGR2bXNrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4NTExMzIsImV4cCI6MjA3NDQyNzEzMn0.8oSPmI_svRRq9GdvsssciUNe0PmD_fkkyhwDG5-FGdA",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})},6830:(e,t,r)=>{"use strict";r.d(t,{dy:()=>n,vX:()=>s});let s=e=>e.startsWith("/")?e:"/".concat(e),n=e=>{let t=e.startsWith("/")?e:"/".concat(e);return"".concat("/gmml-inventory").concat(t)}},7192:(e,t,r)=>{Promise.resolve().then(r.bind(r,7406))},7406:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(5155),n=r(2115),o=r(63),i=r(2890),a=r(2663),l=r(6830),c=r(7830);function d(e){let{logs:t,userProfile:r,onClose:n,onDeleteLog:o}=e,i=async e=>{if(o&&confirm("Are you sure you want to delete this activity log entry? This action cannot be undone."))try{await o(e)}catch(e){console.error("Failed to delete log:",e)}},a=(null==r?void 0:r.role)==="admin";return(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl",children:[(0,s.jsxs)("div",{className:"p-6 border-b flex justify-between items-center",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Activity Log"}),(0,s.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsx)("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:0===t.length?(0,s.jsx)("p",{className:"text-center text-gray-500 py-8",children:"No activity to display."}):(0,s.jsx)("ul",{className:"space-y-4",children:t.map(e=>(0,s.jsx)("li",{className:"p-4 bg-gray-50 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"created":return"bg-green-100 text-green-800";case"updated":return"bg-blue-100 text-blue-800";case"deleted":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(e.action)),children:e.action})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[(0,s.jsx)("span",{className:"font-bold",children:e.user_email})," ",e.action," item: ",(0,s.jsx)("span",{className:"font-semibold",children:e.item_name})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",title:new Date(e.timestamp).toLocaleString(),children:(0,c.m)(new Date(e.timestamp),{addSuffix:!0})}),e.changes&&(0,s.jsxs)("p",{className:"mt-1 text-xs text-gray-600 bg-white p-2 rounded border",children:["Changes: ",Object.entries(e.changes).filter(e=>{let[t]=e;return!["id"].includes(t)}).map(e=>{let[t,r]=e;return"".concat({current_stock:"Current Stock",min_stock:"Min Stock",storage_location:"Storage Location",expire_date:"Expire Date",photo_url:"Photo URL",created_at:"Created At",updated_at:"Updated At",created_by:"Created By",updated_by:"Updated By"}[t]||t.charAt(0).toUpperCase()+t.slice(1),": ").concat((e=>{if(null==e)return"N/A";if("string"==typeof e&&e.includes("T")&&e.includes("Z"))try{return new Date(e).toLocaleString()}catch(t){return e}return String(e)})(r))}).join(", ")]})]}),a&&o&&(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("button",{onClick:()=>i(e.id),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors duration-200",title:"Delete this log entry (Admin only)",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]})},e.id))})}),(0,s.jsx)("div",{className:"p-6 bg-gray-50 rounded-b-lg flex justify-end",children:(0,s.jsx)("button",{onClick:n,className:"px-4 py-2 bg-white border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Close"})})]})})}function m(){let e=(0,o.useRouter)(),[t,r]=(0,n.useState)([]),[c,m]=(0,n.useState)(!0),[u,x]=(0,n.useState)("Initializing..."),[g,h]=(0,n.useState)(null),[p,f]=(0,n.useState)(null),[y,b]=(0,n.useState)([]),[j,v]=(0,n.useState)([]),[k,w]=(0,n.useState)([]),[N,_]=(0,n.useState)(!1),[C,L]=(0,n.useState)({name:"",category:"",current_stock:0,min_stock:0,storage_location:"",unit:"",expire_date:""}),[S,M]=(0,n.useState)({category:"",status:"",location:""}),[I,A]=(0,n.useState)(""),[E,W]=(0,n.useState)([]),[B,D]=(0,n.useState)(!1),[F,O]=(0,n.useState)(!1),[U,H]=(0,n.useState)(null),[z,P]=(0,n.useState)(!1),T=(e,t,r)=>{if(r){let e=new Date(r),t=new Date;if(t.setHours(0,0,0,0),e.setHours(0,0,0,0),e<t)return"Expired"}return e<=0?"Out of Stock":e<=t?"Low Stock":"In Stock"};(0,n.useEffect)(()=>{let e=t;I&&(e=e.filter(e=>e.name.toLowerCase().includes(I.toLowerCase()))),S.category&&(e=e.filter(e=>e.category===S.category)),S.status&&(e=e.filter(e=>e.status===S.status)),S.location&&(e=e.filter(e=>e.storage_location===S.location)),W(e)},[t,S,I]);let V=async()=>{try{let{data:e,error:t}=await i.N.from("categories").select("*").order("name");if(!t&&e)return void v(e);let{data:r,error:s}=await i.N.functions.invoke("manage-categories?action=list");!s&&(null==r?void 0:r.data)&&v(r.data)}catch(e){console.error("Failed to fetch categories:",e)}},G=async()=>{try{let{data:e,error:t}=await i.N.from("locations").select("*").order("name");if(!t&&e)return void w(e);let{data:r,error:s}=await i.N.functions.invoke("manage-locations?action=list");!s&&(null==r?void 0:r.data)&&w(r.data)}catch(e){console.error("Failed to fetch locations:",e)}},R=(0,n.useCallback)(async()=>{m(!0),x("Checking authentication...");try{let{data:{user:e}}=await i.N.auth.getUser();if(h(e),!e){f(null),r([]),W([]),m(!1);return}x("Loading user profile...");let{data:t,error:s}=await i.N.from("profiles").select("*").eq("id",e.id).single();if(s)throw Error("Could not fetch user profile.");f(t),x("Loading inventory data...");let[n,o,a,l,c]=await Promise.all([i.N.from("inventory_items").select("*").order("name",{ascending:!0}),i.N.from("activity_logs").select("*").order("timestamp",{ascending:!1}).limit(50),i.N.from("categories").select("*").order("name"),i.N.from("locations").select("*").order("name"),i.N.rpc("check_expired_items").then(e=>e,e=>(console.log("Note: check_expired_items function not available, will check client-side"),null))]);if(n.error)throw n.error;r(n.data||[]),W(n.data||[]),o.error||b(o.data||[]),null!==c&&console.log("✅ Checked for expired items in parallel"),!a.error&&a.data?v(a.data):V(),!l.error&&l.data?w(l.data):G()}catch(t){let e=t instanceof Error?t.message:"An unknown error occurred.";a.Ay.error("Error fetching data: ".concat(e)),console.error("Data fetch error:",t)}finally{m(!1),P(!0)}},[]);(0,n.useEffect)(()=>{z||R()},[z,R]);let q=async()=>{if(!g||!g.id)return void a.Ay.error("Please login to add items");if(!C.name||!C.category||!C.storage_location)return void a.Ay.error("Please fill in all required fields");let e={name:C.name,category:C.category,current_stock:C.current_stock,min_stock:C.min_stock,storage_location:C.storage_location,unit:C.unit||null,expire_date:C.expire_date||null,status:T(C.current_stock,C.min_stock,C.expire_date),created_by:g.email,updated_by:g.email};console.log("\uD83D\uDD0D Adding item:",e);let{data:s,error:n}=await i.N.from("inventory_items").insert([e]).select().single();if(console.log("\uD83D\uDCCA Insert result:",{data:s,error:n}),n)console.error("Insert error:",n),a.Ay.error("Error: ".concat(n.message));else{console.log("✅ Success:",s);let n=[...t,s].sort((e,t)=>e.name.localeCompare(t.name));r(n),W(n),a.Ay.success('"'.concat(C.name,'" added!')),L({name:"",category:"",current_stock:0,min_stock:0,storage_location:"",unit:"",expire_date:""}),_(!1),await K(s.id,s.name,"created",e)}},J=async e=>{try{let{error:t}=await i.N.from("activity_logs").delete().eq("id",e);if(t)throw t;b(y.filter(t=>t.id!==e)),a.Ay.success("Activity log deleted successfully")}catch(t){let e=t instanceof Error?t.message:"Failed to delete activity log";a.Ay.error("Error: ".concat(e)),console.error("Delete activity log error:",t)}},X=async()=>{if(!U||!g||!g.id)return void a.Ay.error("Please login to update items");if(!U.name||!U.category||!U.storage_location)return void a.Ay.error("Please fill in all required fields");let e={name:U.name,category:U.category,current_stock:U.current_stock,min_stock:U.min_stock,storage_location:U.storage_location,unit:U.unit||null,expire_date:U.expire_date||null,status:T(U.current_stock,U.min_stock,U.expire_date),updated_by:g.email,updated_at:new Date().toISOString()},{data:s,error:n}=await i.N.from("inventory_items").update(e).eq("id",U.id).select().single();if(n)a.Ay.error("Error: ".concat(n.message));else{let n=t.map(e=>e.id===U.id?s:e);r(n),W(n),a.Ay.success('"'.concat(U.name,'" updated!')),H(null),O(!1),await K(U.id,U.name,"updated",e)}},Y=async(e,s)=>{if(!confirm('Are you sure you want to delete "'.concat(s,'"?')))return;if(!g||!g.id)return void a.Ay.error("Please login to delete items");let n=t.find(t=>t.id===e);if(!n)return void a.Ay.error("Item not found");let o={id:n.id,name:n.name,category:n.category,current_stock:n.current_stock,min_stock:n.min_stock,status:n.status,storage_location:n.storage_location,unit:n.unit,expire_date:n.expire_date,photo_url:n.photo_url,created_at:n.created_at,updated_at:n.updated_at,created_by:n.created_by,updated_by:n.updated_by};await K(e,s,"deleted",o);let{error:l}=await i.N.from("inventory_items").delete().eq("id",e);if(l)a.Ay.error("Error deleting item: ".concat(l.message));else{let n=t.filter(t=>t.id!==e);r(n),W(n),a.Ay.success('"'.concat(s,'" has been deleted.'))}},Z=async()=>{let{error:e}=await i.N.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.href}});e&&a.Ay.error("Login failed: ".concat(e.message))},Q=async()=>{await i.N.auth.signOut(),h(null),a.Ay.success("Logged out."),window.location.href=(0,l.dy)("/")},K=async(e,t,r,s)=>{if(g&&g.id)try{let n={item_id:e,user_id:g.id,user_email:g.email,action:r,changes:s,item_name:t,timestamp:new Date().toISOString()},{error:o}=await i.N.from("activity_logs").insert([n]);if(!o){let{data:e}=await i.N.from("activity_logs").select("*").order("timestamp",{ascending:!1}).limit(50);e&&b(e)}}catch(e){console.error("Error logging activity:",e)}},$=t.filter(e=>{let t=e.name.toLowerCase().includes(I.toLowerCase()),r=!S.category||e.category===S.category,s=!S.location||e.storage_location===S.location;return t&&r&&s}),ee=$.length,et=$.filter(e=>"In Stock"===e.status).length,er=$.filter(e=>"Low Stock"===e.status).length,es=$.filter(e=>"Out of Stock"===e.status).length,en=$.filter(e=>"Expired"===e.status).length;return c?(0,s.jsx)("div",{className:"flex h-screen items-center justify-center bg-gray-50",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mb-4"}),(0,s.jsx)("p",{className:"text-lg text-gray-700",children:u}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"This usually takes just a few seconds..."})]})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.Toaster,{position:"top-right"}),(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,s.jsxs)("div",{className:"mx-auto max-w-7xl px-3 py-4 sm:px-6 lg:px-8 sm:py-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-8 h-8 sm:w-10 sm:h-10 bg-indigo-600 rounded-lg flex-shrink-0",children:(0,s.jsx)("span",{className:"text-white font-bold text-sm sm:text-lg",children:"G"})}),(0,s.jsx)("div",{className:"min-w-0",children:(0,s.jsxs)("h1",{className:"text-lg sm:text-2xl font-bold text-gray-900 truncate",children:[(0,s.jsx)("span",{className:"sm:hidden",children:"GMML Inventory"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"GMML Inventory System"})]})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 sm:gap-4 flex-shrink-0",children:[(null==p?void 0:p.role)==="admin"&&(0,s.jsx)("button",{onClick:()=>e.push((0,l.vX)("/admin")),className:"hidden sm:inline-flex text-xs sm:text-sm font-semibold text-indigo-600 hover:text-indigo-800 px-2 py-1 rounded-md hover:bg-indigo-50",children:"Admin Panel"}),(0,s.jsx)("span",{className:"hidden sm:inline text-sm text-gray-600 max-w-32 lg:max-w-none truncate",children:(null==g?void 0:g.email)||"Team Mode"}),g&&g.id?(0,s.jsx)("button",{onClick:Q,className:"text-xs sm:text-sm font-semibold text-red-600 hover:text-red-800 px-2 py-1 rounded-md hover:bg-red-50",children:"Logout"}):(0,s.jsxs)("button",{onClick:Z,className:"text-xs sm:text-sm font-semibold text-indigo-600 hover:text-indigo-800 px-2 py-1 rounded-md hover:bg-indigo-50",children:[(0,s.jsx)("span",{className:"sm:hidden",children:"Login"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Login with Google"})]})]})]}),(0,s.jsxs)("div",{className:"sm:hidden mt-2 flex items-center justify-between text-xs text-gray-600",children:[(0,s.jsx)("span",{className:"truncate flex-1",children:(null==g?void 0:g.email)||"Team Mode"}),(null==p?void 0:p.role)==="admin"&&(0,s.jsx)("button",{onClick:()=>e.push((0,l.vX)("/admin")),className:"ml-2 text-indigo-600 hover:text-indigo-800 font-medium",children:"Admin Panel"})]})]})}),(0,s.jsxs)("main",{className:"mx-auto max-w-7xl py-6 px-6 sm:px-6 lg:px-8",children:[(0,s.jsx)("div",{className:"bg-white p-4 sm:p-6 rounded-lg shadow-sm border border-gray-200 mb-8",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-3 lg:gap-4",children:[(0,s.jsxs)("button",{onClick:()=>M({...S,status:""}),className:"flex items-center gap-2 lg:gap-3 p-2 rounded-lg transition-colors hover:bg-gray-50 ".concat(""===S.status?"ring-2 ring-blue-500 bg-blue-50":""),children:[(0,s.jsx)("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-blue-500 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("svg",{className:"w-4 h-4 lg:w-5 lg:h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("p",{className:"text-xs lg:text-sm font-medium text-gray-600 truncate",children:"Total Items"}),(0,s.jsx)("p",{className:"text-lg lg:text-2xl font-bold text-blue-700",children:ee})]})]}),(0,s.jsxs)("button",{onClick:()=>M({...S,status:"In Stock"}),className:"flex items-center gap-2 lg:gap-3 p-2 rounded-lg transition-colors hover:bg-gray-50 ".concat("In Stock"===S.status?"ring-2 ring-green-500 bg-green-50":""),children:[(0,s.jsx)("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-green-500 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("svg",{className:"w-4 h-4 lg:w-5 lg:h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("p",{className:"text-xs lg:text-sm font-medium text-gray-600 truncate",children:"In Stock"}),(0,s.jsx)("p",{className:"text-lg lg:text-2xl font-bold text-green-700",children:et})]})]}),(0,s.jsxs)("button",{onClick:()=>M({...S,status:"Low Stock"}),className:"flex items-center gap-2 lg:gap-3 p-2 rounded-lg transition-colors hover:bg-gray-50 ".concat("Low Stock"===S.status?"ring-2 ring-yellow-500 bg-yellow-50":""),children:[(0,s.jsx)("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-yellow-500 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("svg",{className:"w-4 h-4 lg:w-5 lg:h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("p",{className:"text-xs lg:text-sm font-medium text-gray-600 truncate",children:"Low Stock"}),(0,s.jsx)("p",{className:"text-lg lg:text-2xl font-bold text-yellow-700",children:er})]})]}),(0,s.jsxs)("button",{onClick:()=>M({...S,status:"Out of Stock"}),className:"flex items-center gap-2 lg:gap-3 p-2 rounded-lg transition-colors hover:bg-gray-50 ".concat("Out of Stock"===S.status?"ring-2 ring-red-500 bg-red-50":""),children:[(0,s.jsx)("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-red-500 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("svg",{className:"w-4 h-4 lg:w-5 lg:h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("p",{className:"text-xs lg:text-sm font-medium text-gray-600 truncate",children:"Out of Stock"}),(0,s.jsx)("p",{className:"text-lg lg:text-2xl font-bold text-red-700",children:es})]})]}),(0,s.jsxs)("button",{onClick:()=>M({...S,status:"Expired"}),className:"flex items-center gap-2 lg:gap-3 p-2 rounded-lg transition-colors hover:bg-gray-50 ".concat("Expired"===S.status?"ring-2 ring-purple-500 bg-purple-50":""),children:[(0,s.jsx)("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-purple-500 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("svg",{className:"w-4 h-4 lg:w-5 lg:h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("p",{className:"text-xs lg:text-sm font-medium text-gray-600 truncate",children:"Expired"}),(0,s.jsx)("p",{className:"text-lg lg:text-2xl font-bold text-purple-700",children:en})]})]})]})}),(0,s.jsxs)("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 mb-6",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-gray-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Filters & Search"})]})}),(0,s.jsx)("div",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search by name"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,s.jsx)("input",{type:"text",id:"search",value:I,onChange:e=>A(e.target.value),placeholder:"Search items...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"filter-category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{id:"filter-category",value:S.category,onChange:e=>M({...S,category:e.target.value}),className:"block w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-900 appearance-none cursor-pointer",children:[(0,s.jsx)("option",{value:"",children:"All Categories"}),j.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.id))]}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"filter-location",className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{id:"filter-location",value:S.location,onChange:e=>M({...S,location:e.target.value}),className:"block w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-900 appearance-none cursor-pointer",children:[(0,s.jsx)("option",{value:"",children:"All Locations"}),k.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.id))]}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"filter-status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{id:"filter-status",value:S.status,onChange:e=>M({...S,status:e.target.value}),className:"block w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-900 appearance-none cursor-pointer",children:[(0,s.jsx)("option",{value:"",children:"All Status"}),(0,s.jsx)("option",{value:"In Stock",children:"In Stock"}),(0,s.jsx)("option",{value:"Low Stock",children:"Low Stock"}),(0,s.jsx)("option",{value:"Out of Stock",children:"Out of Stock"}),(0,s.jsx)("option",{value:"Expired",children:"Expired"})]}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})]})})]}),(0,s.jsxs)("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200",children:[(0,s.jsx)("div",{className:"px-3 py-4 sm:px-6 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-3 sm:flex-row sm:items-center sm:justify-between sm:space-y-0",children:[(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("h2",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Inventory Items"}),(0,s.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["Showing ",E.length," of ",t.length," items"]})]}),(0,s.jsxs)("div",{className:"flex flex-col space-y-2 sm:flex-row sm:items-center sm:space-y-0 sm:space-x-3",children:[(0,s.jsxs)("button",{onClick:()=>_(!N),disabled:!g||!g.id,className:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 w-full sm:w-auto ".concat(g&&g.id&&(null==p?void 0:p.role)!=="user"?"bg-indigo-600 hover:bg-indigo-700":"bg-gray-400 cursor-not-allowed"),children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,s.jsx)("span",{className:"sm:hidden",children:g&&g.id?"Add Item":"Login to Add"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:g&&g.id?"Add Item":"Login to Add Items"})]}),(0,s.jsxs)("div",{className:"flex space-x-2 sm:space-x-3",children:[(0,s.jsxs)("button",{onClick:()=>D(!0),className:"inline-flex items-center justify-center px-3 py-2 border border-gray-300 shadow-sm text-xs sm:text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 flex-1 sm:flex-none",children:[(0,s.jsx)("svg",{className:"w-4 h-4 sm:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Activity Log"})]}),(0,s.jsxs)("button",{onClick:()=>{let e=E.map(e=>({"Item Name":e.name,Category:e.category,"Current Stock":e.current_stock,"Min Stock":e.min_stock,Unit:e.unit||"","Expire Date":e.expire_date?new Date(e.expire_date).toLocaleDateString():"",Status:e.status,Location:e.storage_location,Updated:new Date(e.updated_at).toLocaleDateString()}));if(0===e.length)return void a.Ay.error("No data to export.");let t=Object.keys(e[0]),r=new Blob([[t.join(","),...e.map(e=>t.map(t=>'"'.concat(String(e[t]).replace(/"/g,'""'),'"')).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),n=URL.createObjectURL(r);s.setAttribute("href",n),s.setAttribute("download","inventory_export_".concat(new Date().toISOString().split("T")[0],".csv")),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s),a.Ay.success("CSV exported successfully!")},className:"inline-flex items-center justify-center px-3 py-2 border border-gray-300 shadow-sm text-xs sm:text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 flex-1 sm:flex-none",children:[(0,s.jsx)("svg",{className:"w-4 h-4 sm:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Export CSV"})]})]})]})]})}),N&&(0,s.jsxs)("div",{className:"mt-6 bg-white shadow rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add New Item"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{htmlFor:"item-name",className:"block text-sm font-medium text-gray-700",children:"Item Name *"}),(0,s.jsx)("input",{type:"text",id:"item-name",value:C.name,onChange:e=>L({...C,name:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-900",placeholder:"Enter item name"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"item-category",className:"block text-sm font-medium text-gray-700",children:"Category *"}),(0,s.jsxs)("div",{className:"relative mt-1",children:[(0,s.jsxs)("select",{id:"item-category",value:C.category,onChange:e=>L({...C,category:e.target.value}),className:"block w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-900 appearance-none cursor-pointer",children:[(0,s.jsx)("option",{value:"",children:"Select category"}),j.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.id))]}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"storage-location",className:"block text-sm font-medium text-gray-700",children:"Storage Location *"}),(0,s.jsxs)("div",{className:"relative mt-1",children:[(0,s.jsxs)("select",{id:"storage-location",value:C.storage_location,onChange:e=>L({...C,storage_location:e.target.value}),className:"block w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-900 appearance-none cursor-pointer",children:[(0,s.jsx)("option",{value:"",children:"Select location"}),k.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.id))]}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"current-stock",className:"block text-sm font-medium text-gray-700",children:"Current Stock"}),(0,s.jsxs)("div",{className:"mt-1 flex items-center",children:[(0,s.jsx)("button",{type:"button",onClick:()=>L({...C,current_stock:Math.max(0,C.current_stock-1)}),className:"flex items-center justify-center w-10 h-10 border border-gray-300 rounded-l-md bg-gray-50 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),(0,s.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",id:"current-stock",value:C.current_stock,onChange:e=>{let t=e.target.value.replace(/\D/g,"");L({...C,current_stock:parseInt(t)||0})},className:"block w-full border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-900 text-center [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),(0,s.jsx)("button",{type:"button",onClick:()=>L({...C,current_stock:C.current_stock+1}),className:"flex items-center justify-center w-10 h-10 border border-gray-300 rounded-r-md bg-gray-50 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"min-stock",className:"block text-sm font-medium text-gray-700",children:"Min Stock"}),(0,s.jsxs)("div",{className:"mt-1 flex items-center",children:[(0,s.jsx)("button",{type:"button",onClick:()=>L({...C,min_stock:Math.max(0,C.min_stock-1)}),className:"flex items-center justify-center w-10 h-10 border border-gray-300 rounded-l-md bg-gray-50 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),(0,s.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",id:"min-stock",value:C.min_stock,onChange:e=>{let t=e.target.value.replace(/\D/g,"");L({...C,min_stock:parseInt(t)||0})},className:"block w-full border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-900 text-center [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),(0,s.jsx)("button",{type:"button",onClick:()=>L({...C,min_stock:C.min_stock+1}),className:"flex items-center justify-center w-10 h-10 border border-gray-300 rounded-r-md bg-gray-50 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"item-unit",className:"block text-sm font-medium text-gray-700",children:"Unit"}),(0,s.jsx)("input",{type:"text",id:"item-unit",value:C.unit,onChange:e=>L({...C,unit:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-900",placeholder:"e.g., pcs, kg, L"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"item-expire-date",className:"block text-sm font-medium text-gray-700",children:"Expire Date"}),(0,s.jsx)("input",{type:"date",id:"item-expire-date",value:C.expire_date,onChange:e=>L({...C,expire_date:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-900"})]})]}),(0,s.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{L({name:"",category:"",current_stock:0,min_stock:0,storage_location:"",unit:"",expire_date:""}),_(!1)},className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:"Cancel"}),(0,s.jsx)("button",{type:"button",onClick:q,className:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:"Add Item"})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 mt-6",children:E.map(e=>(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg p-4 flex flex-col",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900 truncate",title:e.name,children:e.name}),(0,s.jsx)("p",{className:"text-sm text-gray-500 truncate",children:e.category})]}),(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"In Stock":return"bg-green-100 text-green-800";case"Low Stock":return"bg-yellow-100 text-yellow-800";case"Out of Stock":return"bg-red-100 text-red-800";case"Expired":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}})(e.status)),children:e.status})})]}),(0,s.jsxs)("div",{className:"mt-4 space-y-2 text-sm text-gray-700 flex-grow",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Stock:"})," ",e.current_stock," / ",e.min_stock," ",e.unit||""]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Location:"})," ",e.storage_location]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-x-4",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Expire Date:"})," ",e.expire_date?new Date(e.expire_date).toLocaleDateString():"-"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Updated:"})," ",new Date(e.updated_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})]}),(0,s.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200 flex justify-end space-x-2",children:(null==p?void 0:p.role)!=="user"&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>{H(e),O(!0)},disabled:!g||!g.id,className:"inline-flex items-center p-1.5 rounded-md ".concat(g&&g.id?"text-indigo-600 hover:text-indigo-900 hover:bg-indigo-50":"text-gray-400 cursor-not-allowed"),title:"Edit",children:(0,s.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,s.jsx)("button",{onClick:()=>Y(e.id,e.name),disabled:!g||!g.id,className:"inline-flex items-center p-1.5 rounded-md ".concat(g&&g.id?"text-red-600 hover:text-red-900 hover:bg-red-50":"text-gray-400 cursor-not-allowed"),title:"Delete",children:(0,s.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},e.id))})]}),F&&U&&(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-8 w-full max-w-3xl",children:[(0,s.jsx)("h3",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Edit Item"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{htmlFor:"edit-item-name",className:"block text-sm font-medium text-gray-700",children:"Item Name *"}),(0,s.jsx)("input",{type:"text",id:"edit-item-name",value:U.name,onChange:e=>H({...U,name:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-900",placeholder:"Enter item name"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"edit-item-category",className:"block text-sm font-medium text-gray-700",children:"Category *"}),(0,s.jsxs)("div",{className:"relative mt-1",children:[(0,s.jsxs)("select",{id:"edit-item-category",value:U.category,onChange:e=>H({...U,category:e.target.value}),className:"block w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-900 appearance-none cursor-pointer",children:[(0,s.jsx)("option",{value:"",children:"Select category"}),j.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.id))]}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"edit-storage-location",className:"block text-sm font-medium text-gray-700",children:"Storage Location *"}),(0,s.jsxs)("div",{className:"relative mt-1",children:[(0,s.jsxs)("select",{id:"edit-storage-location",value:U.storage_location,onChange:e=>H({...U,storage_location:e.target.value}),className:"block w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-900 appearance-none cursor-pointer",children:[(0,s.jsx)("option",{value:"",children:"Select location"}),k.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.id))]}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"edit-current-stock",className:"block text-sm font-medium text-gray-700",children:"Current Stock"}),(0,s.jsxs)("div",{className:"mt-1 flex items-center",children:[(0,s.jsx)("button",{type:"button",onClick:()=>H({...U,current_stock:Math.max(0,U.current_stock-1)}),className:"flex items-center justify-center w-10 h-10 border border-gray-300 rounded-l-md bg-gray-50 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),(0,s.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",id:"edit-current-stock",value:U.current_stock,onChange:e=>{let t=e.target.value.replace(/\D/g,"");H({...U,current_stock:parseInt(t)||0})},className:"block w-full border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-900 text-center [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),(0,s.jsx)("button",{type:"button",onClick:()=>H({...U,current_stock:U.current_stock+1}),className:"flex items-center justify-center w-10 h-10 border border-gray-300 rounded-r-md bg-gray-50 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"edit-min-stock",className:"block text-sm font-medium text-gray-700",children:"Min Stock"}),(0,s.jsxs)("div",{className:"mt-1 flex items-center",children:[(0,s.jsx)("button",{type:"button",onClick:()=>H({...U,min_stock:Math.max(0,U.min_stock-1)}),className:"flex items-center justify-center w-10 h-10 border border-gray-300 rounded-l-md bg-gray-50 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),(0,s.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",id:"edit-min-stock",value:U.min_stock,onChange:e=>{let t=e.target.value.replace(/\D/g,"");H({...U,min_stock:parseInt(t)||0})},className:"block w-full border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-900 text-center [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),(0,s.jsx)("button",{type:"button",onClick:()=>H({...U,min_stock:U.min_stock+1}),className:"flex items-center justify-center w-10 h-10 border border-gray-300 rounded-r-md bg-gray-50 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"edit-item-unit",className:"block text-sm font-medium text-gray-700",children:"Unit"}),(0,s.jsx)("input",{type:"text",id:"edit-item-unit",value:U.unit||"",onChange:e=>H({...U,unit:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-900",placeholder:"e.g., pcs, kg, L"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"edit-item-expire-date",className:"block text-sm font-medium text-gray-700",children:"Expire Date"}),(0,s.jsx)("input",{type:"date",id:"edit-item-expire-date",value:U.expire_date?U.expire_date.split("T")[0]:"",onChange:e=>H({...U,expire_date:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-900"})]})]}),(0,s.jsxs)("div",{className:"mt-8 flex justify-end space-x-3",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{H(null),O(!1)},className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:"Cancel"}),(0,s.jsx)("button",{type:"button",onClick:X,className:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:"Update Item"})]})]})}),B&&(0,s.jsx)(d,{logs:y,userProfile:p,onClose:()=>D(!1),onDeleteLog:J})]})]})]})}}},e=>{e.O(0,[663,796,830,441,255,358],()=>e(e.s=7192)),_N_E=e.O()}]);